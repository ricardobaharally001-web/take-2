{% extends "base_store.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section p-4 p-md-5 mb-5 rounded-4 bg-light position-relative overflow-hidden">
  <div class="hero-bg position-absolute top-0 start-0 w-100 h-100 opacity-10"></div>
  <div class="container-fluid py-5 position-relative">
    <div class="row align-items-center">
      <div class="col-lg-8">
        <h1 class="display-4 fw-bold mb-4">
          {{ settings.tagline or "Discover Amazing Products" }}
        </h1>
        <p class="fs-5 mb-4 text-muted">
          Welcome to {{ settings.store_name or "Our Store" }}. Browse our curated collection 
          of high-quality products with fast, secure checkout.
        </p>
        <div class="d-flex gap-3 flex-wrap">
          <a href="{{ url_for('store.products') }}" class="btn btn-primary btn-lg px-4 py-3">
            <i class="bi bi-bag-check me-2"></i>
            Shop Now
          </a>
          {% if settings.contact_email %}
          <a href="mailto:{{ settings.contact_email }}" class="btn btn-outline-primary btn-lg px-4 py-3">
            <i class="bi bi-envelope me-2"></i>
            Contact Us
          </a>
          {% endif %}
        </div>
      </div>
      <div class="col-lg-4 text-center d-none d-lg-block">
        {% if settings.logo_filename %}
          {% set logo_src = settings.logo_filename if settings.logo_filename.startswith('http') else url_for('uploaded_file', filename=settings.logo_filename) %}
          <img src="{{ logo_src }}" alt="{{ settings.store_name }}" class="img-fluid rounded-3" style="max-height: 200px;">
        {% else %}
          <div class="p-5 bg-white rounded-3 shadow-sm">
            <i class="bi bi-shop display-1 text-primary"></i>
            <h3 class="mt-3">{{ settings.store_name }}</h3>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- Featured Products Section -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="h3 fw-bold mb-0">
    <i class="bi bi-star me-2 text-warning"></i>
    Featured Products
  </h2>
  {% if products %}
  <a href="{{ url_for('store.products') }}" class="btn btn-outline-primary">
    View All Products
    <i class="bi bi-arrow-right ms-2"></i>
  </a>
  {% endif %}
</div>

{% if products %}
<div class="product-grid">
  {% for p in products %}
    <div class="card h-100 shadow-sm border-0">
      {% set img_src = p.image_filename if (p.image_filename and p.image_filename.startswith('http')) else (url_for('uploaded_file', filename=p.image_filename) if p.image_filename else 'https://via.placeholder.com/300x200?text=Product+Image') %}
      
      <div class="position-relative overflow-hidden">
        <img class="card-img-top" src="{{ img_src }}" alt="{{ p.name }}" style="height: 200px; object-fit: cover;">
        <div class="position-absolute top-0 end-0 m-2">
          <span class="badge bg-primary">{{ p.category or 'General' }}</span>
        </div>
      </div>
      
      <div class="card-body d-flex flex-column">
        <h5 class="card-title fw-semibold mb-2">{{ p.name }}</h5>
        
        {% if p.description %}
        <p class="card-text text-muted small mb-3 flex-grow-1">
          {{ p.description[:100] }}{% if p.description|length > 100 %}...{% endif %}
        </p>
        {% endif %}
        
        <div class="d-flex justify-content-between align-items-center mb-3">
          <span class="h5 text-primary fw-bold mb-0">{{ p.price|gyd }}</span>
          {% if p.is_active %}
            <span class="badge bg-success">Available</span>
          {% else %}
            <span class="badge bg-secondary">Out of Stock</span>
          {% endif %}
        </div>
        
        <div class="mt-auto d-flex gap-2">
          <a class="btn btn-sm btn-outline-primary flex-fill" href="{{ url_for('store.product_detail', product_id=p.id) }}">
            <i class="bi bi-eye me-1"></i>
            View Details
          </a>
          {% if p.is_active %}
          <button class="btn btn-sm btn-primary add-to-cart-btn" data-product-id="{{ p.id }}">
            <i class="bi bi-cart-plus"></i>
          </button>
          {% endif %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>
{% else %}
<div class="card">
  <div class="card-body text-center py-5">
    <div class="display-1 text-muted mb-3">
      <i class="bi bi-box-seam"></i>
    </div>
    <h4 class="text-muted mb-3">No Products Available</h4>
    <p class="text-muted mb-4">We're working hard to stock our store. Check back soon for amazing products!</p>
    {% if settings.contact_email %}
    <a href="mailto:{{ settings.contact_email }}" class="btn btn-outline-primary">
      <i class="bi bi-envelope me-2"></i>
      Get Notified
    </a>
    {% endif %}
  </div>
</div>
{% endif %}

<!-- Features Section -->
<div class="row mt-5 pt-5 border-top">
  <div class="col-md-4 text-center mb-4">
    <div class="p-4">
      <i class="bi bi-truck display-4 text-primary mb-3"></i>
      <h5 class="fw-semibold">Fast Delivery</h5>
      <p class="text-muted">Quick and reliable delivery to your doorstep</p>
    </div>
  </div>
  <div class="col-md-4 text-center mb-4">
    <div class="p-4">
      <i class="bi bi-shield-check display-4 text-success mb-3"></i>
      <h5 class="fw-semibold">Secure Payment</h5>
      <p class="text-muted">Safe and secure payment processing</p>
    </div>
  </div>
  <div class="col-md-4 text-center mb-4">
    <div class="p-4">
      <i class="bi bi-headset display-4 text-info mb-3"></i>
      <h5 class="fw-semibold">24/7 Support</h5>
      <p class="text-muted">Round-the-clock customer support</p>
    </div>
  </div>
</div>

<style>
.hero-section {
  background: linear-gradient(135deg, var(--light-bg), var(--card-bg));
  border: 1px solid var(--border-color);
}

.hero-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="%23000" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
}

@media (max-width: 768px) {
  .display-4 {
    font-size: 2rem;
  }
  
  .hero-section {
    margin-bottom: 2rem !important;
  }
}
</style>
{% endblock %}
