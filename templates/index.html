{% extends "base_store.html" %}

{% block content %}
<!-- Professional Hero Section -->
<section class="hero">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center">
        <h1 class="display-4 fw-bold mb-3">{{ settings.tagline or "Discover Amazing Products" }}</h1>
        <p class="lead mb-4 text-muted">Welcome to {{ settings.store_name }}. Shop our curated collection of quality products with professional service and fast delivery.</p>
        <div class="d-flex gap-3 justify-content-center flex-wrap">
          <a href="{{ url_for('store.products_view') }}" class="btn btn-primary btn-lg">
            <i class="bi bi-grid-3x3-gap me-2"></i>
            Shop Now
          </a>
          {% if settings.phone %}
            <a href="tel:{{ settings.phone }}" class="btn btn-outline-primary btn-lg">
              <i class="bi bi-telephone me-2"></i>
              Contact Us
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Products Section -->
<section class="py-5">
  <div class="container">
    <div class="row align-items-center mb-4">
      <div class="col">
        <h2 class="h3 mb-0">Featured Products</h2>
        <p class="text-muted mb-0">Discover our latest and most popular items</p>
      </div>
      <div class="col-auto">
        <a href="{{ url_for('store.products_view') }}" class="btn btn-outline-primary">
          View All Products
          <i class="bi bi-arrow-right ms-1"></i>
        </a>
      </div>
    </div>
    
    {% if products %}
      <div class="product-grid">
        {% for p in products %}
          <div class="card h-100 product-card">
            {% set img_src = p.image_filename if p.image_filename and p.image_filename.startswith('http') else (url_for('uploaded_file', filename=p.image_filename) if p.image_filename else 'https://via.placeholder.com/400x300/f8f9fa/6c757d?text=Product') %}
            
            <div class="position-relative overflow-hidden">
              <img class="card-img-top" src="{{ img_src }}" alt="{{ p.name }}" loading="lazy">
              {% if p.stock_quantity <= 5 and p.stock_quantity > 0 %}
                <span class="position-absolute top-0 start-0 badge bg-warning text-dark m-2">
                  Only {{ p.stock_quantity }} left!
                </span>
              {% endif %}
            </div>
            
            <div class="card-body d-flex flex-column">
              <div class="mb-2">
                {% if p.category %}
                  <span class="badge bg-light text-dark small">{{ p.category }}</span>
                {% endif %}
              </div>
              
              <h3 class="card-title h6 mb-2">{{ p.name }}</h3>
              
              {% if p.description %}
                <p class="card-text text-muted small mb-3">{{ p.description[:80] }}{% if p.description|length > 80 %}...{% endif %}</p>
              {% endif %}
              
              <div class="mt-auto">
                <div class="d-flex justify-content-between align-items-center mb-3">
                  <span class="price">{{ p.price|gyd }}</span>
                  <div class="stock-indicator {{ 'in-stock' if p.stock_quantity > 5 else ('low-stock' if p.stock_quantity > 0 else 'out-of-stock') }}">
                    <i class="bi bi-circle-fill"></i>
                    <span>{{ 'In Stock' if p.stock_quantity > 5 else ('Low Stock' if p.stock_quantity > 0 else 'Out of Stock') }}</span>
                  </div>
                </div>
                
                <div class="d-grid gap-2">
                  <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('store.product_detail', product_id=p.id) }}">
                    <i class="bi bi-eye me-1"></i>
                    View Details
                  </a>
                  {% if p.stock_quantity > 0 %}
                    <button class="btn btn-primary btn-sm add-to-cart-btn" data-product-id="{{ p.id }}">
                      <i class="bi bi-cart-plus me-1"></i>
                      Add to Cart
                    </button>
                  {% else %}
                    <button class="btn btn-secondary btn-sm" disabled>
                      <i class="bi bi-x-circle me-1"></i>
                      Out of Stock
                    </button>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <!-- Empty State -->
      <div class="text-center py-5">
        <div class="mb-4">
          <i class="bi bi-shop display-1 text-muted"></i>
        </div>
        <h4 class="text-muted mb-3">Welcome to {{ settings.store_name }}!</h4>
        <p class="text-muted mb-4">Products will be available soon. Check back later for amazing deals!</p>
        {% if settings.contact_email %}
          <a href="mailto:{{ settings.contact_email }}" class="btn btn-outline-primary">
            <i class="bi bi-envelope me-2"></i>
            Get Notified
          </a>
        {% endif %}
      </div>
    {% endif %}
  </div>
</section>

<!-- Professional Features Section -->
{% if settings.contact_email or settings.phone or settings.address %}
<section class="py-5 bg-light">
  <div class="container">
    <div class="row text-center g-4">
      {% if settings.phone %}
        <div class="col-md-4">
          <div class="feature-item">
            <div class="feature-icon mb-3">
              <i class="bi bi-telephone text-primary display-6"></i>
            </div>
            <h5>Expert Support</h5>
            <p class="text-muted small">Need help? Our team is ready to assist you with any questions.</p>
            <a href="tel:{{ settings.phone }}" class="btn btn-sm btn-outline-primary">Call Now</a>
          </div>
        </div>
      {% endif %}
      
      <div class="col-md-4">
        <div class="feature-item">
          <div class="feature-icon mb-3">
            <i class="bi bi-truck text-primary display-6"></i>
          </div>
          <h5>Fast Delivery</h5>
          <p class="text-muted small">Quick and reliable delivery service across Georgetown and surrounding areas.</p>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="feature-item">
          <div class="feature-icon mb-3">
            <i class="bi bi-shield-check text-primary display-6"></i>
          </div>
          <h5>Secure Shopping</h5>
          <p class="text-muted small">Your data and payments are always protected with our secure checkout process.</p>
        </div>
      </div>
    </div>
  </div>
</section>
{% endif %}

<!-- Call to Action -->
<section class="py-5">
  <div class="container">
    <div class="row justify-content-center text-center">
      <div class="col-lg-6">
        <h3 class="mb-3">Ready to Start Shopping?</h3>
        <p class="text-muted mb-4">Explore our full collection and find exactly what you're looking for with our professional service.</p>
        <a href="{{ url_for('store.products_view') }}" class="btn btn-primary btn-lg">
          <i class="bi bi-grid-3x3-gap me-2"></i>
          Browse All Products
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
