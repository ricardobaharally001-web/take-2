{% extends "base_admin.html" %}

{% block content %}
<div class="admin-header">
  <h1>
    <i class="bi bi-speedometer2 me-3"></i>
    Admin Dashboard
  </h1>
  <p>Manage your store from this central hub</p>
</div>

<!-- Statistics Cards -->
<div class="admin-stats">
  <div class="stat-card">
    <div class="stat-number">{{ product_count or 0 }}</div>
    <div class="stat-label">Products</div>
  </div>
  
  <div class="stat-card" style="background: linear-gradient(135deg, #059669, #047857);">
    <div class="stat-number">{{ recent_orders|length }}</div>
    <div class="stat-label">Recent Orders</div>
  </div>
  
  <div class="stat-card" style="background: linear-gradient(135deg, #7c3aed, #6d28d9);">
    <div class="stat-number">{{ settings.store_name|length if settings else 0 }}</div>
    <div class="stat-label">Store Active</div>
  </div>
</div>

<!-- Navigation Menu -->
<div class="admin-nav">
  <a href="{{ url_for('admin.admin_products') }}" class="btn btn-primary">
    <i class="bi bi-box-seam me-2"></i>
    Manage Products
  </a>
  <a href="{{ url_for('admin.admin_orders') }}" class="btn btn-outline-primary">
    <i class="bi bi-receipt me-2"></i>
    View Orders
  </a>
  <a href="{{ url_for('admin.settings_view') }}" class="btn btn-outline-primary">
    <i class="bi bi-gear me-2"></i>
    Store Settings
  </a>
  <a href="{{ url_for('admin.change_password') }}" class="btn btn-outline-primary">
    <i class="bi bi-shield-lock me-2"></i>
    Change Password
  </a>
</div>

<!-- Recent Orders Section -->
{% if recent_orders %}
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">
      <i class="bi bi-clock-history me-2"></i>
      Recent Orders
    </h5>
    <a href="{{ url_for('admin.admin_orders') }}" class="btn btn-sm btn-outline-primary">
      View All Orders
    </a>
  </div>
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th>Order #</th>
            <th>Customer</th>
            <th>Total</th>
            <th>Payment</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          {% for order in recent_orders %}
          <tr>
            <td>
              <code class="fs-6">#{{ order.id }}</code>
            </td>
            <td>
              <strong>{{ order.customer_name }}</strong><br>
              <small class="text-muted">{{ order.email }}</small>
            </td>
            <td>
              <strong>{{ order.subtotal|gyd }}</strong>
            </td>
            <td>
              <span class="badge bg-{{ 'primary' if order.payment_method == 'paypal' else 'secondary' }}">
                {{ order.payment_method|title }}
              </span>
            </td>
            <td>
              <span class="badge bg-{{ 'success' if order.status == 'paid' else 'warning' }}">
                {{ order.status|title }}
              </span>
            </td>
            <td>
              <small class="text-muted">
                {{ order.created_at.strftime('%Y-%m-%d %H:%M') if order.created_at else 'N/A' }}
              </small>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% else %}
<div class="card text-center">
  <div class="card-body py-5">
    <div class="display-1 text-muted mb-3">
      <i class="bi bi-receipt"></i>
    </div>
    <h4 class="text-muted">No Orders Yet</h4>
    <p class="text-muted mb-4">Orders will appear here when customers make purchases.</p>
    <a href="{{ url_for('admin.admin_products') }}" class="btn btn-primary">
      <i class="bi bi-plus-circle me-2"></i>
      Add Your First Product
    </a>
  </div>
</div>
{% endif %}

<!-- Quick Actions -->
<div class="row mt-4">
  <div class="col-md-6">
    <div class="card">
      <div class="card-body text-center">
        <i class="bi bi-storefront display-4 text-primary mb-3"></i>
        <h5>Visit Your Store</h5>
        <p class="text-muted">See how your store looks to customers</p>
        <a href="{{ url_for('store.index') }}" class="btn btn-outline-primary" target="_blank">
          <i class="bi bi-arrow-up-right-square me-2"></i>
          Open Store
        </a>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-body text-center">
        <i class="bi bi-person-circle display-4 text-danger mb-3"></i>
        <h5>Account Security</h5>
        <p class="text-muted">Keep your admin account secure</p>
        <a href="{{ url_for('admin.logout') }}" class="btn btn-outline-danger">
          <i class="bi bi-box-arrow-right me-2"></i>
          Logout
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
